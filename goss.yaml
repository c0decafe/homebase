file:
  /home:
    exists: true
  /workspaces:
    exists: true
  /usr/local/share/init.sh:
    exists: true
  /usr/local/share/ssh-init.sh:
    exists: true
  /bin/sudo:
    exists: true
    owner: root
    group: root

user:
  vscode:
    exists: true
    uid: 1000
    gid: 1000

group:
  sudo:
    exists: true

command:
  sudo-symlink:
    exec: bash -lc "test \"$(readlink /bin/sudo)\" = 'doas'"
    exit-status: 0
  doas-setuid:
    exec: bash -lc "test \"$(stat -c '%a' /bin/doas)\" = '4755'"
    exit-status: 0
  sudo-works:
    exec: bash -lc "sudo -n true"
    exit-status: 0
  ssh-init-script-exec:
    exec: bash -lc "test -x /usr/local/share/ssh-init.sh"
    exit-status: 0
  init-and-sshd:
    exec: bash -lc "sudo /usr/local/share/init.sh && stat -c '%U:%G %a %n' /home /workspaces && sudo ss -lnpt | grep ':2222'"
    exit-status: 0
    timeout: 30000
