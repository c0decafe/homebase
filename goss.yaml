file:
  /home:
    exists: true
    filetype: directory
    mode: "0755"
    owner: vscode
    group: vscode
  /workspaces:
    exists: true
    filetype: directory
    mode: "0755"
    owner: vscode
    group: vscode
  /usr/local/share/init.sh:
    exists: true
    filetype: file
    mode: "0755"
    owner: root
    group: root
  /usr/local/share/ssh-init.sh:
    exists: true
    filetype: file
    mode: "0755"
    owner: root
    group: root
  /bin/doas:
    exists: true
    filetype: file
    mode: "4755"
    owner: root
    group: root
  /bin/sudo:
    exists: true
    filetype: symlink
    linked-to: doas

user:
  vscode:
    exists: true
    uid: 1000
    gid: 1000

group:
  sudo:
    exists: true

command:
  sudo-works:
    exec: bash -lc "sudo -n true"
    exit-status: 0
  init-and-sshd:
    exec: bash -lc "sudo /usr/local/share/init.sh && sudo ss -lnpt | grep ':2222'"
    exit-status: 0
    timeout: 30000
# Temporarily disabled until ssh-init reinstates GitHub authorized_keys download.
#  ssh-init-authorized-keys:
#    exec: bash -lc "test -f /home/.ssh/authorized_keys"
#    exit-status: 0
